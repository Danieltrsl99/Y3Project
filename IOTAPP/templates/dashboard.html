<!-- filepath: c:\Users\Daniel\Desktop\Project\Y3Project\Y3Project\IOTAPP\templates\dashboard.html -->
{% extends "base_profile.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    {% if devices %}
        {% for device in devices %}
        <div class="device-box">
            <div class="device-name">{{ device['name'] }}</div>
            <form method="POST" action="{{ url_for('dashboard.control_device_route', device_id=device['id']) }}">
                <!-- Color Picker -->
                <div class="color-picker">
                    <label for="color-{{ device['id'] }}">Pick a Color</label>
                    <input type="color" id="color-{{ device['id'] }}" name="color" value="{{ device['current_color'] }}">
                </div>

                <!-- Brightness Slider -->
                <div class="brightness-slider">
                    <label for="brightness-{{ device['id'] }}">Brightness</label>
                    <input type="range" id="brightness-{{ device['id'] }}" name="brightness" min="0" max="100" 
                           value="{{ device['current_brightness'] }}">
                </div>

                <!-- Control Buttons -->
                <div class="control-buttons">
                    <button type="submit" name="action" value="set">Set</button>
                    <button type="submit" name="action" value="turn_on">Turn On</button>
                    <button type="submit" name="action" value="turn_off">Turn Off</button>
                </div>
            </form>
        </div>
        {% endfor %}
    {% else %}
        <p>No devices found.</p>
    {% endif %}
</div>

<!-- Pagination Controls -->
<div class="pagination">
    {% if pagination.has_prev %}
    <a href="{{ url_for('dashboard.dashboard', page=pagination.prev_num) }}" class="btn btn-primary">Previous</a>
    {% endif %}
    <span>Page {{ pagination.page }} of {{ (pagination.total // pagination.per_page) + (1 if pagination.total % pagination.per_page > 0 else 0) }}</span>
    {% if pagination.has_next %}
    <a href="{{ url_for('dashboard.dashboard', page=pagination.next_num) }}" class="btn btn-primary">Next</a>
    {% endif %}
</div>
{% endblock %}